
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>

    $(function(){


        var counter = 0;
        var blockedEnd = false;
        var t = setInterval(function(){
            counter++;
            $("#timer").text(counter);
        }, 100);


        var redo = function(fxn){
            $.ajax({
                url: '/dsfdsafafafasfas=8sdf8dsf8sdfdsfsfds', 
                data: { email: null}, 
                async: false, 
                success: function(f) {
                    console.log(f);
                    }
                , error: function(ee){
                    console.log('error', ee);
                    if(blockedEnd){
                        fxn();
                    } else {
                        redo(fxn)
                    }
                }
            });
        };

        redo(function(){
            console.log("ended")
        });
        

    });

</script>


<div id="timer">0</div>

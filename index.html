
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>

    $(function(){


        var counter = 0;
        var blockedEnd = false;
        var t = setInterval(function(){
            counter++;
            $("#timer").text(counter);
        }, 100);


        var redo = function(fxn){

            if(blockedEnd){
                fxn();
            }else{
                
            var fakeBlock = $.ajax({
                                type: "GET",
                                url: "?dsfsdfdsfsd=ffffsdfs8",
                                async: false
                            }).responseText;
                
                console.log("fuck", fakeBlock);
                
                redo(fxn);

            }
            
        };

        setTimeout(function(){
            redo(function(){
                console.log("ended")
            });
        }, 2000);
        

    });

</script>


<div id="timer">0</div>
<div id="sup">0</div>

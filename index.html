

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>
    // TODO play with web sockets

    $(function(){


        var counter = 0;
        var more = 0;
        var blockedEnd = false;
        var t = setInterval(function(){
            counter++;
            $("#timer").text(counter);
        }, 100);

        var redo = function(fxn){
            more++;
            $("#sup").text(more);
            if(blockedEnd){
                fxn();
            }else{
                
            var fakeBlock = $.ajax({
                                type: "GET",
                                url: "?dsfsdfdsfsd=ffffsdfs8",
                                async: false
                            }).responseText;
                
                console.log("fuck", fakeBlock);
                
                redo(fxn);
            }
        };

        setTimeout(function(){
            redo(function(){
                console.log("ended")
            });
        }, 2000);
        

    });

    /* Sync xhr
    self.onmessage = function (event) {
        if (event.data === "Hello") {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "myFile.txt", false);  // synchronous request
            xhr.send(null);
            self.postMessage(xhr.responseText);
        }
    };
    */
</script>


<div id="timer">0</div>
<div id="sup">0</div>
